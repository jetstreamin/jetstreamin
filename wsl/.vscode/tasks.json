{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "ğŸ¯ Production Health Check",
			"type": "shell",
			"command": "node",
			"args": ["scripts/test-production.js", "production"],
			"group": "test",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared"
			},
			"problemMatcher": []
		},
		{
			"label": "ğŸš€ Deploy to Staging",
			"type": "shell",
			"command": "node",
			"args": ["scripts/deploy-production.js", "staging", "--skip-tests"],
			"group": "build",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": true,
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "ğŸ¯ Deploy to Production",
			"type": "shell",
			"command": "node",
			"args": ["scripts/deploy-production.js", "production"],
			"group": "build",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": true,
				"panel": "new"
			},
			"problemMatcher": [],
			"dependsOn": "ğŸš€ Deploy to Staging"
		},
		{
			"label": "ğŸ§ª Run E2E Tests",
			"type": "shell",
			"command": "npx",
			"args": ["playwright", "test", "--headed"],
			"group": "test",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": true,
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "âš¡ Performance Test",
			"type": "shell",
			"command": "npx",
			"args": ["lighthouse", "https://jetstreamin.io", "--output=html", "--output-path=performance-report.html"],
			"group": "test",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared"
			},
			"problemMatcher": []
		},
		{
			"label": "ğŸ”’ Security Scan",
			"type": "shell",
			"command": "npm",
			"args": ["audit", "--audit-level=moderate"],
			"group": "test",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared"
			},
			"problemMatcher": []
		},
		{
			"label": "ğŸ“¦ Build & Test Pipeline",
			"dependsOrder": "sequence",
			"dependsOn": [
				"ğŸ”’ Security Scan",
				"ğŸ¯ Production Health Check",
				"ğŸ§ª Run E2E Tests",
				"âš¡ Performance Test"
			],
			"group": "test",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": true,
				"panel": "new"
			}
		},
		{
			"label": "ğŸš¨ Emergency Rollback",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-Command",
				"Write-Host 'ğŸš¨ EMERGENCY ROLLBACK INITIATED' -ForegroundColor Red; $backups = aws s3 ls | Select-String 'jetstreamin.io-backup-'; if ($backups) { $latest = ($backups | Sort-Object)[-1]; Write-Host \"ğŸ“¦ Latest backup found: $latest\" -ForegroundColor Yellow; Write-Host 'âš ï¸ Continue rollback? (Y/N)' -ForegroundColor Yellow; $confirm = Read-Host; if ($confirm -eq 'Y' -or $confirm -eq 'y') { Write-Host 'ğŸ”„ Rolling back...' -ForegroundColor Yellow; aws s3 sync s3://$($latest.ToString().Split()[-1])/ s3://jetstreamin.io/ --delete; aws cloudfront create-invalidation --distribution-id E33KH3B6II9307 --paths '/*'; Write-Host 'âœ… Rollback completed' -ForegroundColor Green; } else { Write-Host 'âŒ Rollback cancelled' -ForegroundColor Red; } } else { Write-Host 'âŒ No backups found!' -ForegroundColor Red; }"
			],
			"group": "build",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": true,
				"panel": "new"
			},
			"problemMatcher": []
		},
		{
			"label": "ğŸ“Š Generate Reports",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-Command",
				"Write-Host 'ğŸ“Š GENERATING PRODUCTION REPORTS' -ForegroundColor Green; Write-Host 'ğŸ” Checking website status...' -ForegroundColor Cyan; $status = Invoke-WebRequest -Uri 'https://jetstreamin.io' -Method Head; Write-Host \"Status: $($status.StatusCode)\" -ForegroundColor Yellow; Write-Host 'ğŸ“ˆ Generating performance report...' -ForegroundColor Cyan; npx lighthouse https://jetstreamin.io --output=html --output-path=reports/performance-$(Get-Date -Format 'yyyyMMdd-HHmmss').html --quiet; Write-Host 'ğŸ”’ Running security check...' -ForegroundColor Cyan; npm audit --audit-level=low > reports/security-$(Get-Date -Format 'yyyyMMdd-HHmmss').txt 2>&1; Write-Host 'âœ… Reports generated in ./reports/' -ForegroundColor Green"
			],
			"group": "test",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared"
			},
			"problemMatcher": []
		},
		{
			"label": "Production Test Suite",
			"type": "shell",
			"command": "echo",
			"args": [
				"ğŸ¯ JETSTREAMIN PRODUCTION TESTING PIPELINE",
				"&&",
				"echo",
				"âœ… Website Live: https://jetstreamin.io",
				"&&",
				"echo",
				"ğŸ“Š Running comprehensive production tests...",
				"&&",
				"curl",
				"-s",
				"-o",
				"test-output.html",
				"-w",
				"HTTP Status: %{http_code} | Response Time: %{time_total}s | Size: %{size_download} bytes",
				"https://jetstreamin.io",
				"&&",
				"echo",
				"",
				"&&",
				"echo",
				"ğŸ” Testing SSL Certificate...",
				"&&",
				"curl",
				"-I",
				"-s",
				"https://jetstreamin.io",
				"|",
				"findstr",
				"/C:HTTP/2 200",
				"&&",
				"echo",
				"âœ… SSL Certificate Valid",
				"&&",
				"echo",
				"",
				"&&",
				"echo",
				"ğŸ“ˆ Performance Test Complete",
				"&&",
				"echo",
				"ğŸ‰ All Production Tests PASSED!"
			],
			"group": "test",
			"problemMatcher": [],
			"isBackground": false
		}
	]
}